/**
 * @vira/material-design-css - A Configurable Material Design 3 CSS Library
 * 
 * Main Entry Point for TailwindCSS v4
 * 
 * Configuration:
 * Set --md-config-* variables BEFORE importing this file to customize:
 * 
 * :root {
 *   --md-config-color-primary-light: #your-color;
 *   --md-config-typeface-brand: "Your Font", sans-serif;
 * }
 * @import "@vira/material-design-css";
 * 
 * Or import modules individually:
 * @import "@vira/material-design-css/config";
 * @import "@vira/material-design-css/color/tailwind-theme.css";
 */

@layer theme, md-config, md-resolver, md-prebuild, base, components, utilities;

/* Load configuration (defaults + resolver) */
@import "./config/index.css";

/* ============================================
 * Color Tokens
 * bg-primary, text-on-primary, etc.
 * ============================================ */
@import "./color/tailwind-theme.css";
@import "./color/bg-utilities.css";
@import "./color/text-utilities.css";

/* ============================================
 * Palette Tokens & Utilities (tonal palettes)
 * bg-primary-90, text-primary-10, etc.
 * ============================================ */
@import "./palette/tailwind-theme.css";
@import "./palette/bg-utilities.css";
@import "./palette/text-utilities.css";

/* ============================================
 * Shape Tokens & Utilities
 * rounded-medium, rounded-large, etc.
 * ============================================ */
@import "./shape/tailwind-theme.css";
@import "./shape/shape-utilities.css";

/* ============================================
 * Typography Tokens & Utilities
 * font-display-large, text-body-medium, etc.
 * display-large, body-medium, label-small (shorthand classes)
 * ============================================ */
@import "./typography/tailwind-theme.css";
@import "./typography/tailwind-utilities.css";
@import "./typography/typography-utilities.css";

/* ============================================
 * Motion Tokens & Utilities
 * ease-emphasized, duration-medium1, transition-button, etc.
 * ============================================ */
@import "./motion/tailwind-theme.css";
@import "./motion/transition-utilities.css";
@import "./motion/animation-utilities.css";

/* ============================================
 * Elevation Tokens & Utilities
 * elevation-0 through elevation-5, glow-1 through glow-5
 * ============================================ */
@import "./elevation/tailwind-theme.css";
@import "./elevation/elevation-utilities.css";

/* ============================================
 * State Layer Tokens & Utilities
 * state-layer-primary, state-layer-on-surface, etc.
 * ============================================ */
@import "./state-layer/tailwind-theme.css";
@import "./state-layer/state-layer-utilities.css";

/* ============================================
 * Z-Index Tokens
 * z-modal, z-tooltip, z-sticky, z-overlay, etc.
 * ============================================ */
@import "./z-index/tailwind-theme.css";

/* ============================================
 * Spacing Tokens
 * Overrides Tailwind spacing base to MD3 4px grid.
 * p-1 (4px), m-2 (8px), gap-4 (16px), etc.
 * ============================================ */
@import "./spacing/tailwind-theme.css";

/* ============================================
 * Stroke (Border Width) Tokens
 * border-stroke-narrow, border-stroke-medium, etc.
 * ============================================ */
@import "./stroke/tailwind-theme.css";

/* ============================================
 * Component Size Tokens
 * size-component-medium, w-component-large, h-component-x-small, etc.
 * ============================================ */
@import "./size/tailwind-theme.css";

/* ============================================
 * Scrollbar Utilities
 * scrollbar-thin, scrollbar-hidden, scrollbar-auto
 * ============================================ */
@import "./utilities/scrollbar.css";

/* ============================================
 * Content Visibility Utilities (Performance)
 * content-auto, content-hidden, content-visible
 * ============================================ */
@import "./utilities/content-visibility.css";

/* ============================================
 * Base Styles
 * ============================================ */
@layer base {
  /*
   * Note: color-scheme is handled by the resolver (config/resolver.css).
   * :root defaults to "light dark" (respects OS preference).
   * Add .light or .dark class to override manually.
   */

  * {
    @apply border-outline;
  }

  body {
    @apply bg-surface text-on-surface;
    font-family: var(--font-body-medium, "Roboto", sans-serif);
    font-size: var(--text-body-medium, 14px);
    line-height: var(--leading-body-medium, 20px);
    letter-spacing: var(--tracking-body-medium, 0.25px);
  }

  :focus-visible {
    outline: 2px solid var(--color-primary);
    outline-offset: 2px;
  }

  ::selection {
    background-color: var(--color-primary-container);
    color: var(--color-on-primary-container);
  }

  /* ---- Extended Reset (beyond Tailwind preflight) ---- */

  /* Form controls: normalize dialog (not covered by Tailwind) */
  dialog {
    font: inherit;
  }

  /* Autofill styling: use design system colors instead of browser defaults */
  input:-webkit-autofill,
  button:-webkit-autofill,
  textarea:-webkit-autofill,
  select:-webkit-autofill {
    background-clip: text;
    -webkit-text-fill-color: var(--color-on-surface, #191919);
  }

  /* Number input: remove browser spinner controls */
  input[type="number"] {
    appearance: textfield;
  }

  input[type="number"]::-webkit-inner-spin-button,
  input[type="number"]::-webkit-outer-spin-button {
    appearance: none;
    margin: 0;
  }

  /* Smooth scrolling (respects reduced-motion via the rule below) */
  html:focus-within {
    scroll-behavior: smooth;
  }

  /* Media elements: ensure block display */
  picture,
  video,
  canvas,
  svg {
    display: block;
    max-width: 100%;
  }

  /* Labels: inherit cursor from parent (clickable when wrapping inputs) */
  label {
    cursor: inherit;
  }

  /* Reduced motion: disable all transitions and animations
   * Required by WCAG 2.1 SC 2.3.3
   * Ported from production SCSS design system */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }
}

/* ============================================
 * Optional Imports (not included by default):
 *
 * Color Presets (pick one to override the default palette):
 *   @import "@vira/material-design-css/prebuild-color/blue.css";
 *   @import "@vira/material-design-css/prebuild-color/green.css";
 *   @import "@vira/material-design-css/prebuild-color/pink.css";
 *   @import "@vira/material-design-css/prebuild-color/yellow.css";
 *   @import "@vira/material-design-css/prebuild-color/light-green.css";
 *
 * Classic (non-Tailwind) Color Utilities:
 *   @import "@vira/material-design-css/color/classic-utilities.css";
 * ============================================ */
